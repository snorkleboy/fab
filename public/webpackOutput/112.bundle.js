(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[112],{

/***/ "./frontend/baseApp/store/actions/mapActions/mapActions.js":
/*!*****************************************************************!*\
  !*** ./frontend/baseApp/store/actions/mapActions/mapActions.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.reset = exports.resetFilters = exports.getLocations = exports.receiveWeatherConditions = exports.receiveWorkOrders = exports.receiveLocations = exports.setLatLng = exports.updateLocationFilter = exports.unsetLocationFilter = exports.setLocationFilter = exports.actionTypes = undefined;\n\nvar _apiCalls = __webpack_require__(/*! ../../../../util/apiCalls */ \"./frontend/util/apiCalls.js\");\n\nvar apiCalls = _interopRequireWildcard(_apiCalls);\n\nvar _translateAPI = __webpack_require__(/*! ../../../../../util/translateAPI */ \"./util/translateAPI.js\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar actionTypes = exports.actionTypes = {\n    receiveLocations: \"RECEIVE_LOCATIONS\",\n    setFilter: \"SET_FILTER\",\n    unsetFilter: \"UNSET_FILTER\",\n    updateFilter: \"UPDATE_FILTER\",\n    receiveWorkOrders: \"RECEIVE_WORK_ORDERS\",\n    receiveWeatherConditions: \"RECEIVE_WEATHER_CONDITIONS\",\n    viewPortFilter: \"VIEWPORT_FILTER\",\n    setLatLng: \"SET_LATLNG\",\n    reset: \"RESET\",\n    resetFilters: \"RESET_FILTERS\"\n};\n\nvar setLocationFilter = exports.setLocationFilter = function setLocationFilter(filterObj) {\n    return {\n        type: actionTypes.setFilter,\n        payload: filterObj\n    };\n};\nvar unsetLocationFilter = exports.unsetLocationFilter = function unsetLocationFilter(filterObj) {\n    return {\n        type: actionTypes.unsetFilter,\n        payload: filterObj\n    };\n};\nvar updateLocationFilter = exports.updateLocationFilter = function updateLocationFilter(filterObj) {\n    return {\n        type: actionTypes.updateFilter,\n        payload: filterObj\n    };\n};\nvar setLatLng = exports.setLatLng = function setLatLng(latlng) {\n    return {\n        type: actionTypes.setLatLng,\n        payload: latlng\n    };\n};\n\nvar receiveLocations = exports.receiveLocations = function receiveLocations(locations) {\n    return (0, _translateAPI.ensure)({\n        type: actionTypes.receiveLocations,\n        payload: locations\n    });\n};\n\nvar receiveWorkOrders = exports.receiveWorkOrders = function receiveWorkOrders(WOs) {\n    return (0, _translateAPI.ensure)({\n        type: actionTypes.receiveWorkOrders,\n        payload: WOs\n    });\n};\n\nvar receiveWeatherConditions = exports.receiveWeatherConditions = function receiveWeatherConditions(WCs) {\n    return (0, _translateAPI.ensure)({\n        type: actionTypes.receiveWeatherConditions,\n        payload: WCs\n    });\n};\nvar getLocations = exports.getLocations = function getLocations(numberOfLocations, clientId) {\n    return function (dispatch) {\n        return apiCalls.fetchLocations(numberOfLocations, clientId).then(function (json) {\n            return dispatch(receiveLocations(json));\n        });\n    };\n};\n\nvar resetFilters = exports.resetFilters = function resetFilters() {\n    return {\n        type: actionTypes.resetFilters\n    };\n};\n\nvar resetReducers = function resetReducers() {\n    return {\n        type: actionTypes.reset\n    };\n};\nvar reset = exports.reset = function reset() {\n    return function (dispatch) {\n        return apiCalls.fetchResetLocations().then(function (json) {\n            dispatch(resetReducers());return json;\n        }).then(function (json) {\n            return dispatch(receiveLocations(json));\n        });\n    };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9mcm9udGVuZC9iYXNlQXBwL3N0b3JlL2FjdGlvbnMvbWFwQWN0aW9ucy9tYXBBY3Rpb25zLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2Zyb250ZW5kL2Jhc2VBcHAvc3RvcmUvYWN0aW9ucy9tYXBBY3Rpb25zL21hcEFjdGlvbnMuanM/NGZmYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBhcGlDYWxscyBmcm9tICcuLi8uLi8uLi8uLi91dGlsL2FwaUNhbGxzJ1xuaW1wb3J0IHtlbnN1cmV9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi91dGlsL3RyYW5zbGF0ZUFQSVwiO1xuXG5leHBvcnQgY29uc3QgYWN0aW9uVHlwZXMgPSB7XG4gICAgcmVjZWl2ZUxvY2F0aW9ucyA6IFwiUkVDRUlWRV9MT0NBVElPTlNcIixcbiAgICBzZXRGaWx0ZXI6IFwiU0VUX0ZJTFRFUlwiLFxuICAgIHVuc2V0RmlsdGVyOiBcIlVOU0VUX0ZJTFRFUlwiLFxuICAgIHVwZGF0ZUZpbHRlcjogXCJVUERBVEVfRklMVEVSXCIsXG4gICAgcmVjZWl2ZVdvcmtPcmRlcnM6XCJSRUNFSVZFX1dPUktfT1JERVJTXCIsXG4gICAgcmVjZWl2ZVdlYXRoZXJDb25kaXRpb25zOlwiUkVDRUlWRV9XRUFUSEVSX0NPTkRJVElPTlNcIixcbiAgICB2aWV3UG9ydEZpbHRlcjogXCJWSUVXUE9SVF9GSUxURVJcIixcbiAgICBzZXRMYXRMbmc6IFwiU0VUX0xBVExOR1wiLFxuICAgIHJlc2V0OlwiUkVTRVRcIixcbiAgICByZXNldEZpbHRlcnM6XCJSRVNFVF9GSUxURVJTXCIsXG59O1xuXG5cbmV4cG9ydCBjb25zdCBzZXRMb2NhdGlvbkZpbHRlciA9IChmaWx0ZXJPYmopPT4oe1xuICAgIHR5cGU6YWN0aW9uVHlwZXMuc2V0RmlsdGVyLFxuICAgIHBheWxvYWQ6IGZpbHRlck9ialxufSlcbmV4cG9ydCBjb25zdCB1bnNldExvY2F0aW9uRmlsdGVyID0gKGZpbHRlck9iaik9Pih7XG4gICAgdHlwZTphY3Rpb25UeXBlcy51bnNldEZpbHRlcixcbiAgICBwYXlsb2FkOiBmaWx0ZXJPYmpcbn0pXG5leHBvcnQgY29uc3QgdXBkYXRlTG9jYXRpb25GaWx0ZXIgPSAoZmlsdGVyT2JqKT0+KHtcbiAgICB0eXBlOiBhY3Rpb25UeXBlcy51cGRhdGVGaWx0ZXIsXG4gICAgcGF5bG9hZDpmaWx0ZXJPYmpcbn0pXG5leHBvcnQgY29uc3Qgc2V0TGF0TG5nID0gKGxhdGxuZyk9Pih7XG4gICAgdHlwZTphY3Rpb25UeXBlcy5zZXRMYXRMbmcsXG4gICAgcGF5bG9hZDpsYXRsbmdcbn0pXG5cblxuZXhwb3J0IGNvbnN0IHJlY2VpdmVMb2NhdGlvbnMgPSAobG9jYXRpb25zKSA9PiBlbnN1cmUoe1xuICAgICAgICB0eXBlOiBhY3Rpb25UeXBlcy5yZWNlaXZlTG9jYXRpb25zLFxuICAgICAgICBwYXlsb2FkOmxvY2F0aW9uc1xuICAgIH0pXG5cbmV4cG9ydCBjb25zdCByZWNlaXZlV29ya09yZGVycyA9IChXT3MpPT5lbnN1cmUoe1xuICAgIHR5cGU6YWN0aW9uVHlwZXMucmVjZWl2ZVdvcmtPcmRlcnMsXG4gICAgcGF5bG9hZDpXT3Ncbn0pXG5cbmV4cG9ydCBjb25zdCByZWNlaXZlV2VhdGhlckNvbmRpdGlvbnMgPSAoV0NzKT0+ZW5zdXJlKHtcbiAgICB0eXBlOmFjdGlvblR5cGVzLnJlY2VpdmVXZWF0aGVyQ29uZGl0aW9ucyxcbiAgICBwYXlsb2FkOiBXQ3Ncbn0pXG5leHBvcnQgY29uc3QgZ2V0TG9jYXRpb25zID0gKG51bWJlck9mTG9jYXRpb25zLGNsaWVudElkKSA9PiBkaXNwYXRjaCA9PiBhcGlDYWxscy5mZXRjaExvY2F0aW9ucyhudW1iZXJPZkxvY2F0aW9ucyxjbGllbnRJZClcbiAgICAudGhlbigoanNvbikgPT4gZGlzcGF0Y2gocmVjZWl2ZUxvY2F0aW9ucyhqc29uKSkpO1xuXG5leHBvcnQgY29uc3QgcmVzZXRGaWx0ZXJzID0gKCk9Pih7XG4gICAgdHlwZTphY3Rpb25UeXBlcy5yZXNldEZpbHRlcnNcbn0pXG5cblxuY29uc3QgcmVzZXRSZWR1Y2VycyA9ICgpPT4oe1xuICAgIHR5cGU6YWN0aW9uVHlwZXMucmVzZXRcbn0pXG5leHBvcnQgY29uc3QgcmVzZXQgPSAoKSA9PiBkaXNwYXRjaCA9PiBhcGlDYWxscy5mZXRjaFJlc2V0TG9jYXRpb25zKClcbiAgICAudGhlbihqc29uPT57ZGlzcGF0Y2gocmVzZXRSZWR1Y2VycygpKTsgcmV0dXJuIGpzb259KVxuICAgIC50aGVuKChqc29uKSA9PiBkaXNwYXRjaChyZWNlaXZlTG9jYXRpb25zKGpzb24pKSk7XG5cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFDQTtBQWFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQ0E7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFDQTtBQUlBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFJQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFGQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./frontend/baseApp/store/actions/mapActions/mapActions.js\n");

/***/ }),

/***/ "./frontend/util/apiCalls.js":
/*!***********************************!*\
  !*** ./frontend/util/apiCalls.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.fetchLocations = fetchLocations;\nexports.fetchResetLocations = fetchResetLocations;\nexports.postUser = postUser;\nexports.deleteUser = deleteUser;\nexports.postWorkOrders = postWorkOrders;\nfunction fetchLocations() {\n    return fetch(\"./admin/locations\").then(function (res) {\n        return res.json();\n    }).then(function (res) {\n        return res;\n    });\n}\nfunction fetchResetLocations() {\n    return fetch(\"./admin/reset\").then(function (res) {\n        return res.json();\n    }).then(function (res) {\n        return res;\n    });\n}\nfunction postUser(user) {\n    var options = makeopts(user, \"POST\");\n    console.log({ user: user });\n    return fetch(\"./login/\" + user.subscriber + \"/\" + user.role, options).then(function (res) {\n        return res.json();\n    });\n}\nfunction deleteUser() {\n    var options = makeopts(\"\", \"DELETE\");\n    return fetch(\"./users/\", options).then(window.location.replace(window.location.origin + \"/login\"));\n}\nfunction postWorkOrders(workOrders) {\n    var opts = makeopts(workOrders[0], \"POST\");\n    var url = \"/admin/workOrders\";\n    return fetch(url, opts);\n}\nfunction makeopts(data, method) {\n    return {\n        body: JSON.stringify(data),\n        method: method,\n        credentials: 'include',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        }\n    };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9mcm9udGVuZC91dGlsL2FwaUNhbGxzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2Zyb250ZW5kL3V0aWwvYXBpQ2FsbHMuanM/ZTVlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCBmdW5jdGlvbiBmZXRjaExvY2F0aW9ucygpe1xuICAgIHJldHVybiBmZXRjaChgLi9hZG1pbi9sb2NhdGlvbnNgKVxuICAgICAgICAudGhlbihyZXM9PnJlcy5qc29uKCkpXG4gICAgICAgIC50aGVuKHJlcz0+IHtyZXR1cm4gcmVzfSlcbn1cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFJlc2V0TG9jYXRpb25zKCl7XG4gICAgcmV0dXJuIGZldGNoKGAuL2FkbWluL3Jlc2V0YClcbiAgICAgICAgLnRoZW4ocmVzPT5yZXMuanNvbigpKVxuICAgICAgICAudGhlbihyZXM9PiB7cmV0dXJuIHJlc30pXG59XG5leHBvcnQgZnVuY3Rpb24gcG9zdFVzZXIodXNlcil7XG4gICAgY29uc3Qgb3B0aW9ucyA9IG1ha2VvcHRzKHVzZXIsXCJQT1NUXCIpO1xuICAgIGNvbnNvbGUubG9nKHt1c2VyfSk7XG4gICAgcmV0dXJuIGZldGNoKGAuL2xvZ2luLyR7dXNlci5zdWJzY3JpYmVyfS8ke3VzZXIucm9sZX1gLG9wdGlvbnMpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpXG4gICAgICAgIH0pXG4gICAgICAgXG59XG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlVXNlcigpe1xuICAgIGNvbnN0IG9wdGlvbnMgPSBtYWtlb3B0cyhcIlwiLFwiREVMRVRFXCIpO1xuICAgIHJldHVybiBmZXRjaChgLi91c2Vycy9gLG9wdGlvbnMpICAgICAgICBcbiAgICAgICAgLnRoZW4od2luZG93LmxvY2F0aW9uLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL2xvZ2luXCIpIClcbn1cbmV4cG9ydCBmdW5jdGlvbiBwb3N0V29ya09yZGVycyh3b3JrT3JkZXJzKXtcbiAgICBjb25zdCBvcHRzID0gbWFrZW9wdHMod29ya09yZGVyc1swXSxcIlBPU1RcIik7XG4gICAgY29uc3QgdXJsID0gXCIvYWRtaW4vd29ya09yZGVyc1wiXG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0cylcbiAgICAgICAgXG59XG5mdW5jdGlvbiBtYWtlb3B0cyhkYXRhLCBtZXRob2Qpe1xuICAgIHJldHVybiB7XG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfSxcbiAgICB9XG59XG5cblxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUNBO0FBS0E7QUFLQTtBQVNBO0FBS0E7QUF4QkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSkE7QUFTQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./frontend/util/apiCalls.js\n");

/***/ }),

/***/ "./util/translateAPI.js":
/*!******************************!*\
  !*** ./util/translateAPI.js ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.ensure = ensure;\nexports.ensureLocationObject = ensureLocationObject;\n\nvar _mapActions = __webpack_require__(/*! ../frontend/baseApp/store/actions/mapActions/mapActions */ \"./frontend/baseApp/store/actions/mapActions/mapActions.js\");\n\nvar _workOrder = __webpack_require__(/*! ./workOrder */ \"./util/workOrder.js\");\n\nfunction ensure(action) {\n    switch (action.type) {\n        case _mapActions.actionTypes.receiveLocations:\n            ensureLocationObject(action.payload.locations);\n    }\n    return action;\n}\n\nfunction ensureLocationObject(locationPayload) {\n    Object.keys(locationPayload).forEach(function (key) {\n        return ensureLocation(locationPayload[key]);\n    });\n    return locationPayload;\n}\nfunction ensureLocation(location) {\n    if (!location.weatherCondition) {\n        location.weatherCondition = {};\n    }\n    if (!location.Workorders) {\n        location.Workorders = {};\n    }\n    location.workOrderCount = (0, _workOrder.countWorkOrders)(location);\n    location.Latitude = parseFloat(location.Latitude);\n    location.Longitude = parseFloat(location.Longitude);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlsL3RyYW5zbGF0ZUFQSS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy91dGlsL3RyYW5zbGF0ZUFQSS5qcz8xNWIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YWN0aW9uVHlwZXN9IGZyb20gXCIuLi9mcm9udGVuZC9iYXNlQXBwL3N0b3JlL2FjdGlvbnMvbWFwQWN0aW9ucy9tYXBBY3Rpb25zXCI7XG5pbXBvcnQge2NvdW50V29ya09yZGVyc30gZnJvbSBcIi4vd29ya09yZGVyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmUoYWN0aW9uKSB7XG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSl7XG4gICAgICAgIGNhc2UgYWN0aW9uVHlwZXMucmVjZWl2ZUxvY2F0aW9uczpcbiAgICAgICAgICAgIGVuc3VyZUxvY2F0aW9uT2JqZWN0KGFjdGlvbi5wYXlsb2FkLmxvY2F0aW9ucyk7XG4gICAgfSBcbiAgICByZXR1cm4gYWN0aW9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlTG9jYXRpb25PYmplY3QobG9jYXRpb25QYXlsb2FkKXtcbiAgICBPYmplY3Qua2V5cyhsb2NhdGlvblBheWxvYWQpLmZvckVhY2goa2V5PT5lbnN1cmVMb2NhdGlvbihsb2NhdGlvblBheWxvYWRba2V5XSkpXG4gICAgcmV0dXJuIGxvY2F0aW9uUGF5bG9hZFxufVxuZnVuY3Rpb24gZW5zdXJlTG9jYXRpb24obG9jYXRpb24pe1xuICAgIGlmICghbG9jYXRpb24ud2VhdGhlckNvbmRpdGlvbil7XG4gICAgICAgIGxvY2F0aW9uLndlYXRoZXJDb25kaXRpb249e307XG4gICAgfVxuICAgIGlmICghbG9jYXRpb24uV29ya29yZGVycykge1xuICAgICAgICBsb2NhdGlvbi5Xb3Jrb3JkZXJzID0ge307XG4gICAgfVxuICAgIGxvY2F0aW9uLndvcmtPcmRlckNvdW50ID0gY291bnRXb3JrT3JkZXJzKGxvY2F0aW9uKTtcbiAgICBsb2NhdGlvbi5MYXRpdHVkZSA9IHBhcnNlRmxvYXQobG9jYXRpb24uTGF0aXR1ZGUpO1xuICAgIGxvY2F0aW9uLkxvbmdpdHVkZSA9IHBhcnNlRmxvYXQobG9jYXRpb24uTG9uZ2l0dWRlKTtcbn1cblxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUdBO0FBUUE7QUFDQTtBQVpBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./util/translateAPI.js\n");

/***/ }),

/***/ "./util/workOrder.js":
/*!***************************!*\
  !*** ./util/workOrder.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.sortWorkOrders = sortWorkOrders;\nexports.addWorkOrderToLocation = addWorkOrderToLocation;\nexports.countWorkOrders = countWorkOrders;\nexports.makeWorkOrderIconFromLocation = makeWorkOrderIconFromLocation;\nexports.getHighestWorkOrderStatus = getHighestWorkOrderStatus;\nexports.makeWorkOrderIcon = makeWorkOrderIcon;\nvar statusList = exports.statusList = [\"OPEN\", \"IN_PROGRESS\", \"COMPLETED\",\n// \"ETA_past\",\n// \"unscheduled\",\n// \"ETA_modified\",\n// \"first_pass\",\n// \"scheduled\",\n// \"in_progress\",\n// \"completed\",\n\"no_work_orders\"];\nvar workOrdersStatus = {};\nstatusList.forEach(function (status, i) {\n    workOrdersStatus[status] = { value: i + 1, icon: \"./imgs/markerIcons/\" + status + \".svg\", status: status };\n});\nvar workOrdersStatusMap = exports.workOrdersStatusMap = workOrdersStatus;\n\nfunction sortWorkOrders(wos, values) {\n    var workOrders = wos.slice();\n    var valuesObj = Object.assign({}, workOrdersStatusMap, values);\n    return workOrders.sort(function (a, b) {\n        return valuesObj[a.Status.Primary].value - valuesObj[b.Status.Primary].value;\n    });\n}\n\nvar makeWorkOrderStatusValues = exports.makeWorkOrderStatusValues = function makeWorkOrderStatusValues(selectObjs) {\n    var obj = {};\n    getWorkOrderStatusArr(selectObjs).forEach(function (status) {\n        return obj[status] = { value: 0 };\n    });\n    return obj;\n};\nvar getWorkOrderStatusArr = exports.getWorkOrderStatusArr = function getWorkOrderStatusArr(selectObjs) {\n    if (!selectObjs) {\n        return [];\n    }\n    var woFilter = selectObjs.filter(function (filter) {\n        return filter.type === \"workOrderFilter\";\n    })[0];\n    return woFilter ? woFilter.data.seriesNames : [];\n};\n\nfunction addWorkOrderToLocation(location, workOrder) {\n    var workOrders = location.Workorders;\n    if (!location.workOrderCount) {\n        location.workOrderCount = {};\n    }\n    var count = location.workOrderCount;\n\n    var previosWorkOrder = workOrders[workOrder.Id];\n    if (previosWorkOrder) {\n        count[previosWorkOrder.Status.Primary] = count[previosWorkOrder.Status.Primary] - 1;\n    } else {\n        count.sum = count.sum + 1;\n    }\n    workOrders[workOrder.Id] = workOrder;\n\n    count[workOrder.Status.Primary] = count[workOrder.Status.Primary] + 1;\n}\nfunction countWorkOrders(location) {\n    var workOrderMap = location.Workorders;\n    var count = {};\n    statusList.forEach(function (status) {\n        return count[status] = 0;\n    });\n    var sum = 0;\n    Object.values(workOrderMap).forEach(function (wo) {\n        var status = wo.Status.Primary;\n        if (!count[status] && count[status] !== 0) {\n            console.warn({ err: \"unknown workorder status\", wo: wo, status: status });\n        }\n        count[status] = count[status] + 1;\n        sum++;\n    });\n    count.sum = sum;\n    return count;\n}\n\nfunction makeWorkOrderIconFromLocation(location, statusArr) {\n    return makeWorkOrderIcon(getHighestWorkOrderStatus(location, statusArr));\n}\nfunction getHighestWorkOrderStatus(location) {\n    var statusArr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    var count = location.workOrderCount;\n    if (count.sum === 0) {\n        return null;\n    }\n\n    statusArr.sort(function (a, b) {\n        return workOrdersStatusMap[a].value - workOrdersStatusMap[b].value;\n    });\n    for (var i = 0; i < statusArr.length; i++) {\n        var countNum = count[statusArr[i]];\n        if (countNum && countNum > 0) {\n            return statusArr[i];\n        }\n    }\n    for (var _i = 0; _i < statusList.length; _i++) {\n        if (count[statusList[_i]] && count[statusList[_i]] > 0) {\n            return statusList[_i];\n        }\n    }\n    return null;\n}\n\nfunction getHighestStatusFromArr(arr) {\n    var filters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    return sortWorkOrders(arr, makeWorkOrderStatusValues(filters))[0].Status.Primary;\n}\n\nfunction makeWorkOrderIcon(thing) {\n    var status = void 0;\n    if (!thing) {\n        return workOrdersStatusMap[statusList[statusList.length - 1]];\n    } else if (Array.isArray(thing)) {\n        if (thing.length === 0) {\n            return workOrdersStatusMap[statusList[statusList.length - 1]];\n        }\n        status = getHighestStatusFromArr(thing);\n    } else if ((typeof thing === \"undefined\" ? \"undefined\" : _typeof(thing)) === 'object') {\n        status = thing.Status.Primary;\n    } else {\n        status = thing;\n    }\n\n    var obj = workOrdersStatusMap[status];\n    if (!obj) {\n        console.warn({ \"ERR\": \"no icon for input\", obj: obj, status: status, thing: thing, workOrdersStatusMap: workOrdersStatusMap });\n    }\n    return obj;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlsL3dvcmtPcmRlci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy91dGlsL3dvcmtPcmRlci5qcz81ZmRjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzdGF0dXNMaXN0ID0gW1xuICAgIFwiT1BFTlwiLFxuICAgIFwiSU5fUFJPR1JFU1NcIixcbiAgICBcIkNPTVBMRVRFRFwiLFxuICAgIC8vIFwiRVRBX3Bhc3RcIixcbiAgICAvLyBcInVuc2NoZWR1bGVkXCIsXG4gICAgLy8gXCJFVEFfbW9kaWZpZWRcIixcbiAgICAvLyBcImZpcnN0X3Bhc3NcIixcbiAgICAvLyBcInNjaGVkdWxlZFwiLFxuICAgIC8vIFwiaW5fcHJvZ3Jlc3NcIixcbiAgICAvLyBcImNvbXBsZXRlZFwiLFxuICAgIFwibm9fd29ya19vcmRlcnNcIlxuXTtcbmNvbnN0IHdvcmtPcmRlcnNTdGF0dXMgPSB7fTtcbnN0YXR1c0xpc3QuZm9yRWFjaCgoc3RhdHVzLGkpID0+e1xuICAgIHdvcmtPcmRlcnNTdGF0dXNbc3RhdHVzXSA9IHt2YWx1ZTppKzEsaWNvbjpcIi4vaW1ncy9tYXJrZXJJY29ucy9cIitzdGF0dXMrXCIuc3ZnXCIsc3RhdHVzfVxufSlcbmV4cG9ydCBjb25zdCB3b3JrT3JkZXJzU3RhdHVzTWFwID0gd29ya09yZGVyc1N0YXR1cztcblxuXG5leHBvcnQgZnVuY3Rpb24gc29ydFdvcmtPcmRlcnMod29zLHZhbHVlcyl7XG4gICAgY29uc3Qgd29ya09yZGVycyA9IHdvcy5zbGljZSgpO1xuICAgIGNvbnN0IHZhbHVlc09iaiA9IE9iamVjdC5hc3NpZ24oe30sd29ya09yZGVyc1N0YXR1c01hcCx2YWx1ZXMpXG4gICAgcmV0dXJuIHdvcmtPcmRlcnMuc29ydCgoYSxiKT0+KHZhbHVlc09ialthLlN0YXR1cy5QcmltYXJ5XS52YWx1ZS12YWx1ZXNPYmpbYi5TdGF0dXMuUHJpbWFyeV0udmFsdWUpKVxufVxuXG5leHBvcnQgY29uc3QgbWFrZVdvcmtPcmRlclN0YXR1c1ZhbHVlcyA9IChzZWxlY3RPYmpzKT0+e1xuICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgIGdldFdvcmtPcmRlclN0YXR1c0FycihzZWxlY3RPYmpzKS5mb3JFYWNoKHN0YXR1cyA9Pm9ialtzdGF0dXNdPXt2YWx1ZTowfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydCBjb25zdCBnZXRXb3JrT3JkZXJTdGF0dXNBcnIgPSAoc2VsZWN0T2Jqcyk9PiB7XG4gICAgaWYgKCFzZWxlY3RPYmpzKXtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBjb25zdCB3b0ZpbHRlciA9IHNlbGVjdE9ianMuZmlsdGVyKChmaWx0ZXIpID0+IGZpbHRlci50eXBlID09PSBcIndvcmtPcmRlckZpbHRlclwiKVswXTtcbiAgICByZXR1cm4gd29GaWx0ZXIgPyB3b0ZpbHRlci5kYXRhLnNlcmllc05hbWVzIDogW107XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFdvcmtPcmRlclRvTG9jYXRpb24obG9jYXRpb24sd29ya09yZGVyKXtcbiAgICBjb25zdCB3b3JrT3JkZXJzID0gbG9jYXRpb24uV29ya29yZGVycztcbiAgICBpZiAoIWxvY2F0aW9uLndvcmtPcmRlckNvdW50KXtcbiAgICAgICAgbG9jYXRpb24ud29ya09yZGVyQ291bnQgPSB7fTtcbiAgICB9XG4gICAgY29uc3QgY291bnQgPSBsb2NhdGlvbi53b3JrT3JkZXJDb3VudDtcbiAgIFxuICAgIFxuICAgIGNvbnN0IHByZXZpb3NXb3JrT3JkZXIgPSB3b3JrT3JkZXJzW3dvcmtPcmRlci5JZF07XG4gICAgaWYgKHByZXZpb3NXb3JrT3JkZXIpe1xuICAgICAgICBjb3VudFtwcmV2aW9zV29ya09yZGVyLlN0YXR1cy5QcmltYXJ5XSA9IGNvdW50W3ByZXZpb3NXb3JrT3JkZXIuU3RhdHVzLlByaW1hcnldIC0xO1xuICAgIH1lbHNle1xuICAgICAgICBjb3VudC5zdW0gPSBjb3VudC5zdW0gKyAxO1xuICAgIH1cbiAgICB3b3JrT3JkZXJzW3dvcmtPcmRlci5JZF0gPSB3b3JrT3JkZXI7XG5cbiAgICBjb3VudFt3b3JrT3JkZXIuU3RhdHVzLlByaW1hcnldID0gY291bnRbd29ya09yZGVyLlN0YXR1cy5QcmltYXJ5XSArIDE7XG4gICBcblxufVxuZXhwb3J0IGZ1bmN0aW9uIGNvdW50V29ya09yZGVycyhsb2NhdGlvbikge1xuICAgIGNvbnN0IHdvcmtPcmRlck1hcCA9IGxvY2F0aW9uLldvcmtvcmRlcnM7XG4gICAgY29uc3QgY291bnQgPSB7fTtcbiAgICBzdGF0dXNMaXN0LmZvckVhY2goc3RhdHVzPT5jb3VudFtzdGF0dXNdPTApXG4gICAgbGV0IHN1bT0wO1xuICAgIE9iamVjdC52YWx1ZXMod29ya09yZGVyTWFwKS5mb3JFYWNoKHdvPT57XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHdvLlN0YXR1cy5QcmltYXJ5O1xuICAgICAgICBpZiAoIWNvdW50W3N0YXR1c10gJiYgY291bnRbc3RhdHVzXSAhPT0gMCl7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oe2VycjpcInVua25vd24gd29ya29yZGVyIHN0YXR1c1wiLHdvLHN0YXR1c30pXG4gICAgICAgIH1cbiAgICAgICAgY291bnRbc3RhdHVzXSA9IGNvdW50W3N0YXR1c10gKyAxO1xuICAgICAgICBzdW0rKztcbiAgICB9KVxuICAgIGNvdW50LnN1bSA9IHN1bTtcbiAgICByZXR1cm4gY291bnQ7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VXb3JrT3JkZXJJY29uRnJvbUxvY2F0aW9uKGxvY2F0aW9uLHN0YXR1c0Fycil7XG4gICAgcmV0dXJuIG1ha2VXb3JrT3JkZXJJY29uKGdldEhpZ2hlc3RXb3JrT3JkZXJTdGF0dXMobG9jYXRpb24sc3RhdHVzQXJyKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0SGlnaGVzdFdvcmtPcmRlclN0YXR1cyhsb2NhdGlvbixzdGF0dXNBcnI9W10pIHtcbiAgICBjb25zdCBjb3VudCA9IGxvY2F0aW9uLndvcmtPcmRlckNvdW50O1xuICAgIGlmIChjb3VudC5zdW0gPT09IDAgKXtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHN0YXR1c0Fyci5zb3J0KChhLGIpPT53b3JrT3JkZXJzU3RhdHVzTWFwW2FdLnZhbHVlIC0gd29ya09yZGVyc1N0YXR1c01hcFtiXS52YWx1ZSlcbiAgICBmb3IgKGxldCBpID0gMCA7IGk8c3RhdHVzQXJyLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgY29uc3QgY291bnROdW0gPSBjb3VudFtzdGF0dXNBcnJbaV1dXG4gICAgICAgIGlmIChjb3VudE51bSAmJiBjb3VudE51bT4wKXtcbiAgICAgICAgICAgIHJldHVybiBzdGF0dXNBcnJbaV07XG4gICAgICAgIH0gXG4gICAgfVxuICAgIGZvciAobGV0IGk9MDtpPHN0YXR1c0xpc3QubGVuZ3RoO2krKyl7XG4gICAgICAgIGlmIChjb3VudFtzdGF0dXNMaXN0W2ldXSAmJiBjb3VudFtzdGF0dXNMaXN0W2ldXSA+IDAgKXtcbiAgICAgICAgICAgIHJldHVybiBzdGF0dXNMaXN0W2ldXG4gICAgICAgIH1cbiAgICB9IFxuICAgIHJldHVybiBudWxsOyBcbiAgICBcbn1cblxuZnVuY3Rpb24gZ2V0SGlnaGVzdFN0YXR1c0Zyb21BcnIoYXJyLGZpbHRlcnM9W10pe1xuICAgIHJldHVybiBzb3J0V29ya09yZGVycyhhcnIsbWFrZVdvcmtPcmRlclN0YXR1c1ZhbHVlcyhmaWx0ZXJzKSlbMF0uU3RhdHVzLlByaW1hcnk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlV29ya09yZGVySWNvbih0aGluZyl7XG4gICAgbGV0IHN0YXR1cztcbiAgICBpZiAoIXRoaW5nKXtcbiAgICAgICAgcmV0dXJuIHdvcmtPcmRlcnNTdGF0dXNNYXBbc3RhdHVzTGlzdFtzdGF0dXNMaXN0Lmxlbmd0aC0xXV07XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHRoaW5nKSkge1xuICAgICAgICBpZiAodGhpbmcubGVuZ3RoPT09MCl7XG4gICAgICAgICAgICByZXR1cm4gd29ya09yZGVyc1N0YXR1c01hcFtzdGF0dXNMaXN0W3N0YXR1c0xpc3QubGVuZ3RoLTFdXTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0dXMgPSBnZXRIaWdoZXN0U3RhdHVzRnJvbUFycih0aGluZyk7XG4gICAgfWVsc2UgaWYgKHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCcpe1xuICAgICAgICBzdGF0dXMgPSB0aGluZy5TdGF0dXMuUHJpbWFyeTtcbiAgICB9IGVsc2V7XG4gICAgICAgIHN0YXR1cyA9IHRoaW5nO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBvYmogPSB3b3JrT3JkZXJzU3RhdHVzTWFwW3N0YXR1c107XG4gICAgaWYgKCFvYmope1xuICAgICAgICBjb25zb2xlLndhcm4oe1wiRVJSXCI6XCJubyBpY29uIGZvciBpbnB1dFwiLG9iaixzdGF0dXMsdGhpbmcsd29ya09yZGVyc1N0YXR1c01hcH0pXG4gICAgfSBcbiAgICByZXR1cm4gb2JqO1xuXG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBb0JBO0FBb0JBO0FBb0JBO0FBa0JBO0FBR0E7QUEwQkE7QUEzR0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./util/workOrder.js\n");

/***/ })

}]);