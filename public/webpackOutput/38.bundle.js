(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[38],{

/***/ "./frontend/baseApp/store/reducers/locationReducers/selectedReducer.js":
/*!*****************************************************************************!*\
  !*** ./frontend/baseApp/store/reducers/locationReducers/selectedReducer.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _mapActions = __webpack_require__(/*! ../../actions/mapActions/mapActions */ \"./frontend/baseApp/store/actions/mapActions/mapActions.js\");\n\nvar _selected = function _selected() {\n    return {\n        selected: [],\n        bounded: []\n    };\n};\nfunction selectedReducer(state, action) {\n    Object.freeze(state);\n    if (!state || !state.selectObjs) {\n        throw new TypeError(\"default state of locations.SelectObjs should be set before the selectedReducer is called\");\n    }\n    var newState = Object.assign({}, _selected(), state);\n    var selected = void 0,\n        selectObjs = void 0,\n        bounded = void 0;\n    switch (action.type) {\n        case _mapActions.actionTypes.receiveLocations:\n        case _mapActions.actionTypes.receiveWeatherConditions:\n        case _mapActions.actionTypes.receiveWorkOrders:\n        case _mapActions.actionTypes.setFilter:\n        case _mapActions.actionTypes.updateFilter:\n        case _mapActions.actionTypes.unsetFilter:\n        case _mapActions.actionTypes.reset:\n        case _mapActions.actionTypes.resetFilters:\n            var _select = select(newState.locations, newState.selectObjs);\n\n            selected = _select.selected;\n            selectObjs = _select.selectObjs;\n            bounded = _select.bounded;\n\n            newState.selected = selected;\n            newState.selectObjs = selectObjs;\n            newState.bounded = bounded;\n\n            return Object.assign({}, newState);\n        default:\n            return newState;\n    }\n}\nfunction select(locations, filters) {\n    return subSelect(Object.values(locations), filters);\n}\nfunction subSelect(locations, filters) {\n    var selectObjs = filters.slice();\n    selectObjs.forEach(function (filter) {\n        return filter.reset();\n    });\n\n    var shapeFilter = selectObjs.find(function (filter) {\n        return filter.type === \"shapeFilter\";\n    });\n    var defaultFilter = selectObjs[0];\n    var boundFilter = shapeFilter || defaultFilter;\n    var boundedObj = [];\n    if (boundFilter) {\n        boundedObj = locations.filter(function (loc) {\n            return boundFilter.filterFun(loc);\n        });\n    }\n    var bounded = Object.values(boundedObj);\n\n    var selected = bounded.filter(function (location) {\n        var thisBool = true;\n        for (var i = 1; i < selectObjs.length; i++) {\n            var filter = filters[i];\n            // const defaultFilter = filters[0].filterFun;\n            if (!filter.filter(location)) {\n                thisBool = false;\n            }\n        }\n        return thisBool;\n    });\n\n    return { selected: selected, selectObjs: selectObjs, bounded: bounded };\n}\nselectedReducer.defaultState = _selected;\nexports.default = selectedReducer;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9mcm9udGVuZC9iYXNlQXBwL3N0b3JlL3JlZHVjZXJzL2xvY2F0aW9uUmVkdWNlcnMvc2VsZWN0ZWRSZWR1Y2VyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2Zyb250ZW5kL2Jhc2VBcHAvc3RvcmUvcmVkdWNlcnMvbG9jYXRpb25SZWR1Y2Vycy9zZWxlY3RlZFJlZHVjZXIuanM/OWJkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2FjdGlvblR5cGVzfSBmcm9tICcuLi8uLi9hY3Rpb25zL21hcEFjdGlvbnMvbWFwQWN0aW9ucydcblxuY29uc3QgX3NlbGVjdGVkID0gKCk9Pih7XG4gICAgc2VsZWN0ZWQ6IFtdLFxuICAgIGJvdW5kZWQ6W11cbn0pO1xuZnVuY3Rpb24gc2VsZWN0ZWRSZWR1Y2VyIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgT2JqZWN0LmZyZWV6ZShzdGF0ZSk7XG4gICAgaWYgKCFzdGF0ZSB8fCAhc3RhdGUuc2VsZWN0T2Jqcyl7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJkZWZhdWx0IHN0YXRlIG9mIGxvY2F0aW9ucy5TZWxlY3RPYmpzIHNob3VsZCBiZSBzZXQgYmVmb3JlIHRoZSBzZWxlY3RlZFJlZHVjZXIgaXMgY2FsbGVkXCIpO1xuICAgIH1cbiAgICBsZXQgbmV3U3RhdGUgPSBPYmplY3QuYXNzaWduKHt9LF9zZWxlY3RlZCgpLHN0YXRlKTtcbiAgICBsZXQgc2VsZWN0ZWQsc2VsZWN0T2Jqcyxib3VuZGVkO1xuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSBhY3Rpb25UeXBlcy5yZWNlaXZlTG9jYXRpb25zOlxuICAgICAgICBjYXNlIGFjdGlvblR5cGVzLnJlY2VpdmVXZWF0aGVyQ29uZGl0aW9uczpcbiAgICAgICAgY2FzZSBhY3Rpb25UeXBlcy5yZWNlaXZlV29ya09yZGVyczpcbiAgICAgICAgY2FzZSBhY3Rpb25UeXBlcy5zZXRGaWx0ZXI6XG4gICAgICAgIGNhc2UgYWN0aW9uVHlwZXMudXBkYXRlRmlsdGVyOlxuICAgICAgICBjYXNlIGFjdGlvblR5cGVzLnVuc2V0RmlsdGVyOlxuICAgICAgICBjYXNlIGFjdGlvblR5cGVzLnJlc2V0OlxuICAgICAgICBjYXNlIGFjdGlvblR5cGVzLnJlc2V0RmlsdGVyczpcbiAgICAgICAgICAgICh7c2VsZWN0ZWQsc2VsZWN0T2Jqcyxib3VuZGVkfSA9IHNlbGVjdChuZXdTdGF0ZS5sb2NhdGlvbnMsbmV3U3RhdGUuc2VsZWN0T2JqcykpXG4gICAgICAgICAgICBuZXdTdGF0ZS5zZWxlY3RlZCA9IHNlbGVjdGVkO1xuICAgICAgICAgICAgbmV3U3RhdGUuc2VsZWN0T2JqcyA9IHNlbGVjdE9ianM7XG4gICAgICAgICAgICBuZXdTdGF0ZS5ib3VuZGVkID0gYm91bmRlZDtcblxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sbmV3U3RhdGUpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNlbGVjdChsb2NhdGlvbnMsIGZpbHRlcnMgKXtcbiAgICByZXR1cm4gc3ViU2VsZWN0KE9iamVjdC52YWx1ZXMobG9jYXRpb25zKSwgZmlsdGVycyk7XG59XG5mdW5jdGlvbiBzdWJTZWxlY3QobG9jYXRpb25zLCBmaWx0ZXJzKXtcbiAgICBjb25zdCBzZWxlY3RPYmpzID0gZmlsdGVycy5zbGljZSgpO1xuICAgIHNlbGVjdE9ianMuZm9yRWFjaChmaWx0ZXI9PmZpbHRlci5yZXNldCgpKTtcblxuICAgIGNvbnN0IHNoYXBlRmlsdGVyID0gc2VsZWN0T2Jqcy5maW5kKGZpbHRlcj0+IGZpbHRlci50eXBlID09PSBcInNoYXBlRmlsdGVyXCIpO1xuICAgIGNvbnN0IGRlZmF1bHRGaWx0ZXIgPSBzZWxlY3RPYmpzWzBdO1xuICAgIGNvbnN0IGJvdW5kRmlsdGVyID0gc2hhcGVGaWx0ZXIgfHwgZGVmYXVsdEZpbHRlcjtcbiAgICBsZXQgYm91bmRlZE9iaiA9IFtdO1xuICAgIGlmIChib3VuZEZpbHRlcil7XG4gICAgICAgIGJvdW5kZWRPYmogPSBsb2NhdGlvbnMuZmlsdGVyKGxvYz0+IGJvdW5kRmlsdGVyLmZpbHRlckZ1bihsb2MpKVxuICAgIH1cbiAgICBjb25zdCBib3VuZGVkID1PYmplY3QudmFsdWVzKGJvdW5kZWRPYmopXG4gICAgXG4gICAgY29uc3Qgc2VsZWN0ZWQgPSBib3VuZGVkLmZpbHRlcigobG9jYXRpb24pPT57XG4gICAgICAgIGxldCB0aGlzQm9vbCA9IHRydWU7XG4gICAgICAgIGZvciAobGV0IGk9MTsgaTxzZWxlY3RPYmpzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IGZpbHRlcnNbaV07XG4gICAgICAgICAgICAvLyBjb25zdCBkZWZhdWx0RmlsdGVyID0gZmlsdGVyc1swXS5maWx0ZXJGdW47XG4gICAgICAgICAgICBpZiAoIWZpbHRlci5maWx0ZXIobG9jYXRpb24pKXtcbiAgICAgICAgICAgICAgICB0aGlzQm9vbCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzQm9vbDtcbiAgICB9KVxuXG4gICAgcmV0dXJuIHtzZWxlY3RlZCxzZWxlY3RPYmpzLGJvdW5kZWR9O1xufVxuc2VsZWN0ZWRSZWR1Y2VyLmRlZmF1bHRTdGF0ZT1fc2VsZWN0ZWRcbmV4cG9ydCBkZWZhdWx0IHNlbGVjdGVkUmVkdWNlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaEJBO0FBa0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./frontend/baseApp/store/reducers/locationReducers/selectedReducer.js\n");

/***/ })

}]);